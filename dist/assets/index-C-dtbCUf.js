import{H as G,n as L}from"./navigator-C92a063l.js";import{u as M,a as f,r as O,s as j,c as C,d as t,b as i,w as e,e as b,O as m,q,F as B,P as A,f as r,o as c,x as Q,i as a,A as u,k as J,l as K,H as W,Q as X,E as Y,p as Z,j as ee}from"./index-3UtpE0ST.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe=p=>(Z("data-v-5cf191dc"),p=p(),ee(),p),le={class:"container"},se={class:"content"},ae={class:"carouselDiv"},ne=["src"],re={class:"infoDiv"},ue={class:"footer"},de=oe(()=>i("span",{style:{"font-size":"20px","font-weight":"bold"}},"商品描述",-1)),ie={__name:"index",setup(p){const v=M();let g=f(""),h=f("");const x=J(),k=K(),o=f({}),I=f(!1),w=f(),y=O({promoterId:v.stuId,targetId:localStorage.getItem("goodsId"),content:null});async function D(){console.log("goodsId="),console.log(k.query.goodsId);let s=await A(k.query.goodsId);console.log("result="),o.value=s.goods,console.log(o.value)}j(()=>{g.value=v.username,h.value=v.stuId,D(),console.log("monunted了"),console.log(o.value)});function N(s,l,_){l?l.length<10?_(new Error("请输入10字以上的内容！")):_():_(new Error("请输入举报原因！"))}const R={content:[{required:!0,validator:N,trigger:["blur","change"]}]};async function E(){var s,l;await((s=w.value)==null?void 0:s.validate()),await W(),await X(y),(l=w.value)==null||l.resetFields(),Y.success("提交成功，请耐心等待处理"),I.value=!1}function F(){let s=v.stuId;s!=o.value.sellerStuId?(s=o.value.sellerStuId,x.push({name:"NonPersonalInfo",query:{stuId:s}})):x.push({name:"personalInfo",query:{stuId:s}})}return(s,l)=>{const _=r("el-carousel-item"),z=r("el-carousel"),n=r("el-descriptions-item"),S=r("el-descriptions"),V=r("el-button"),P=r("el-input"),U=r("el-form-item"),H=r("el-form"),T=r("el-dialog"),$=r("el-divider");return c(),C(B,null,[t(G),i("div",le,[t(L),i("div",se,[i("div",ae,[t(z,{trigger:"click",height:"500px"},{default:e(()=>[(c(!0),C(B,null,Q(o.value.detailPictureUrls,(d,ce)=>(c(),m(_,null,{default:e(()=>[i("img",{src:d,alt:"",class:"imageDiv"},null,8,ne)]),_:2},1024))),256))]),_:1})]),i("div",re,[t(S,{column:"1",size:"large",title:"商品详情"},{default:e(()=>[t(n,{label:" 商品id："},{default:e(()=>[a(u(o.value.goodsId),1)]),_:1}),t(n,{label:" 标题："},{default:e(()=>[a(u(o.value.title),1)]),_:1}),t(n,{label:" 类别："},{default:e(()=>[a(u(o.value.type),1)]),_:1}),t(n,{label:" 价格："},{default:e(()=>[a("￥"+u(o.value.price),1)]),_:1}),t(n,{label:" 卖家名称："},{default:e(()=>[i("span",{class:"nameTag",onClick:l[0]||(l[0]=d=>F())},u(o.value.sellerName),1)]),_:1}),t(n,{label:" 上架时间："},{default:e(()=>[a(u(o.value.createTime),1)]),_:1}),b(g)?(c(),m(n,{key:0,label:" 交易地点："},{default:e(()=>[a(u(o.value.goodsLocation),1)]),_:1})):q("",!0),b(g)?(c(),m(n,{key:1,label:" 联系方式："},{default:e(()=>[a(u(o.value.contactInfo),1)]),_:1})):(c(),m(n,{key:2},{default:e(()=>[a("请登录后查看交易地点与联系方式！")]),_:1}))]),_:1}),b(g)&&b(h)!=o.value.sellerStuId?(c(),m(V,{key:0,class:"reportButton",type:"danger",onClick:l[1]||(l[1]=d=>I.value=!0)},{default:e(()=>[a("举报商品")]),_:1})):q("",!0),t(T,{modelValue:I.value,"onUpdate:modelValue":l[4]||(l[4]=d=>I.value=d),title:"举报",width:"500",center:"","align-center":""},{footer:e(()=>[t(V,{type:"danger",class:"reportButton",onClick:l[3]||(l[3]=d=>E())},{default:e(()=>[a("提交")]),_:1})]),default:e(()=>[t(H,{model:y,"label-width":"auto",ref_key:"ruleFormRef",ref:w,rules:R},{default:e(()=>[t(U,{label:"举报原因：",prop:"content"},{default:e(()=>[t(P,{type:"textarea",modelValue:y.content,"onUpdate:modelValue":l[2]||(l[2]=d=>y.content=d),autosize:"",maxlength:"100","show-word-limit":"",placeholder:"请输入10到100字的内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])]),i("div",ue,[t($,{"content-position":"center"},{default:e(()=>[de]),_:1}),t(S,{coloum:"1",size:"large"},{default:e(()=>[t(n,null,{default:e(()=>[a(u(o.value.description),1)]),_:1})]),_:1})])])],64)}}},pe=te(ie,[["__scopeId","data-v-5cf191dc"]]);export{pe as default};
